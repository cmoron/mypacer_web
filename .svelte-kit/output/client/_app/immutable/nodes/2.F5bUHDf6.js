import{s as vt,n as Be,r as at,c as fe,o as gl,b as kl,x as rt,p as st,y as Rt}from"../chunks/DHz2H-Fj.js";import{S as bt,i as At,d as _,y as Ce,z as Re,a as V,b as c,A as X,w as d,c as b,e as k,g as O,h as A,j as B,s as ve,f as q,B as de,t as Y,x as Pt,q as pl,k as vl,l as bl,C as Le,D as Al,u as Sl,v as Ml,r as El,E as _e,F as tt,G as Ll}from"../chunks/CNU2L-1m.js";import{w as me}from"../chunks/DuE1YsxB.js";function Q(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ot(e,t){const l=Math.floor(e/3600),n=Math.floor(e%3600/60),s=Math.floor(e%60),r=Math.floor((e-Math.floor(e))*100);let o="";return l>0&&(o+=`${l}h`),(n>0||l>0)&&(o+=`${l>0?n.toString().padStart(2,"0"):n}'`),o+=`${s.toString().padStart(2,"0")}"`,t&&(o+=`${r.toString().padStart(2,"0")}`),o}function ot(e){const t=Math.floor(e/60),l=e%60;return`${t}'${l.toString().padStart(2,"0")}"`}function Bt(e){return e.toFixed(2)}function Rl(e,t,l){const n=localStorage.getItem(t);let s;return n!==null?typeof l=="boolean"?s=n==="true":typeof l=="number"&&(s=parseFloat(n)):s=l,e.set(s),e.subscribe(r=>{localStorage.setItem(t,r.toString())})}function qe(e,t,l){return Rl(e,t,l)}const mt=360,gt=120,Tl=1,Cl=16,Pe=[100,200,300,400,500,600,800,1e3,1500,1609.34,3e3,5e3,1e4,2e4,21097,42195],Pl=1e5,lt=me(mt),nt=me(gt),ut=me(Tl);function Ol(){try{return JSON.parse(localStorage.getItem("customDistances")??"[]")}catch{return[]}}function Bl(e){localStorage.setItem("customDistances",JSON.stringify(e))}function St(e){Bl(e.filter(t=>!Pe.includes(t)))}const ct=me([...Pe,...Ol()].sort((e,t)=>e-t));ct.subscribe(St);function Dl(e){const t=Number.parseInt(e,10);Number.isNaN(t)||t<=0||t>Pl||Pe.includes(t)||ct.update(l=>{if(l.includes(t))return l;const n=[...l,t].sort((s,r)=>s-r);return St(n),n})}function Dt(e){Pe.includes(e)||ct.update(t=>{const l=t.filter(n=>n!==e).sort((n,s)=>n-s);return St(l),l})}const Gl=me(!1),Ul=me({men:{},women:{}}),jl=me(!1),Mt=["#03A9F4","#F44336","#9C27B0","#607D8B","#E91E63","#3F51B5","#795548","#009688","#00BCD4","#4CAF50"],wl=JSON.parse(localStorage.getItem("colorUsage")),Oe=wl||new Array(Mt.length).fill(!1);function yl(){let e=Oe.indexOf(!1);return e===-1&&(Oe.fill(!1),e=0),Oe[e]=!0,localStorage.setItem("colorUsage",JSON.stringify(Oe)),Mt[e]}function Vl(e){const t=Mt.indexOf(e);t!==-1&&(Oe[t]=!1,localStorage.setItem("colorUsage",JSON.stringify(Oe)))}function Fl(){const{subscribe:e,set:t,update:l}=me([]);return{subscribe:e,setAthletes:n=>t(n),addAthlete:n=>{l(s=>{if(s.some(o=>o.id===n.id))return s;const r=yl();return[...s,{...n,color:r,isLoading:!1,visible:!0,records:[]}]})},removeAthlete:n=>{l(s=>{const r=s.find(o=>o.id===n);return r&&Vl(r.color),s.filter(o=>o.id!==n)})},setLoading:(n,s)=>{l(r=>r.map(o=>o.id===n?{...o,isLoading:s}:o))},setRecords:(n,s)=>{l(r=>r.map(o=>o.id===n?{...o,records:s,isLoading:!1}:o))},setAllInvisible:()=>{l(n=>n.map(s=>({...s,visible:!1})))},toggleVisible:n=>{l(s=>s.map(r=>r.id===n?{...r,visible:!r.visible}:r))},isAthleteVisible:n=>{let s=!1;return l(r=>{const o=r.find(a=>a.id===n);return o&&(s=o.visible),r}),s},reset:()=>{Oe.fill(!1),t([])}}}const he=Fl();var Hl=typeof global=="object"&&global&&global.Object===Object&&global,Kl=typeof self=="object"&&self&&self.Object===Object&&self,Nl=Hl||Kl||Function("return this")(),it=Nl.Symbol,Il=Object.prototype,Wl=Il.hasOwnProperty,ql=Il.toString,Ye=it?it.toStringTag:void 0;function Yl(e){var t=Wl.call(e,Ye),l=e[Ye];try{e[Ye]=void 0;var n=!0}catch{}var s=ql.call(e);return n&&(t?e[Ye]=l:delete e[Ye]),s}var Zl=Object.prototype,Jl=Zl.toString;function Xl(e){return Jl.call(e)}var Ql="[object Null]",zl="[object Undefined]",Gt=it?it.toStringTag:void 0;function $l(e){return e==null?e===void 0?zl:Ql:Gt&&Gt in Object(e)?Yl(e):Xl(e)}function xl(e){return e!=null&&typeof e=="object"}var en="[object Symbol]";function tn(e){return typeof e=="symbol"||xl(e)&&$l(e)==en}var ln=/\s/;function nn(e){for(var t=e.length;t--&&ln.test(e.charAt(t)););return t}var sn=/^\s+/;function rn(e){return e&&e.slice(0,nn(e)+1).replace(sn,"")}function pt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ut=NaN,on=/^[-+]0x[0-9a-f]+$/i,an=/^0b[01]+$/i,cn=/^0o[0-7]+$/i,fn=parseInt;function jt(e){if(typeof e=="number")return e;if(tn(e))return Ut;if(pt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=rn(e);var l=an.test(e);return l||cn.test(e)?fn(e.slice(2),l?2:8):on.test(e)?Ut:+e}var ht=function(){return Nl.Date.now()},un="Expected a function",hn=Math.max,dn=Math.min;function _n(e,t,l){var n,s,r,o,a,i,h=0,w=!1,E=!1,p=!0;if(typeof e!="function")throw new TypeError(un);t=jt(t)||0,pt(l)&&(w=!!l.leading,E="maxWait"in l,r=E?hn(jt(l.maxWait)||0,t):r,p="trailing"in l?!!l.trailing:p);function D(U){var H=n,W=s;return n=s=void 0,h=U,o=e.apply(W,H),o}function T(U){return h=U,a=setTimeout(v,t),w?D(U):o}function S(U){var H=U-i,W=U-h,y=t-H;return E?dn(y,r-W):y}function m(U){var H=U-i,W=U-h;return i===void 0||H>=t||H<0||E&&W>=r}function v(){var U=ht();if(m(U))return N(U);a=setTimeout(v,S(U))}function N(U){return a=void 0,p&&n?D(U):(n=s=void 0,o)}function L(){a!==void 0&&clearTimeout(a),h=0,n=i=s=a=void 0}function I(){return a===void 0?o:N(ht())}function R(){var U=ht(),H=m(U);if(n=arguments,s=this,i=U,H){if(a===void 0)return T(i);if(E)return clearTimeout(a),a=setTimeout(v,t),D(i)}return a===void 0&&(a=setTimeout(v,t)),o}return R.cancel=L,R.flush=I,R}const wt={AFG:"AF",ALA:"AX",ALB:"AL",DZA:"DZ",ASM:"AS",AND:"AD",AGO:"AO",AIA:"AI",ATA:"AQ",ATG:"AG",ARG:"AR",ARM:"AM",ABW:"AW",AUS:"AU",AUT:"AT",AZE:"AZ",BHS:"BS",BHR:"BH",BGD:"BD",BRB:"BB",BLR:"BY",BEL:"BE",BLZ:"BZ",BEN:"BJ",BMU:"BM",BTN:"BT",BOL:"BO",BES:"BQ",BIH:"BA",BWA:"BW",BVT:"BV",BRA:"BR",VGB:"VG",IOT:"IO",BRN:"BN",BGR:"BG",BFA:"BF",BDI:"BI",KHM:"KH",CMR:"CM",CAN:"CA",CPV:"CV",CYM:"KY",CAF:"CF",TCD:"TD",CHL:"CL",CHN:"CN",HKG:"HK",MAC:"MO",CXR:"CX",CCK:"CC",COL:"CO",COM:"KM",COG:"CG",COD:"CD",COK:"CK",CRI:"CR",CIV:"CI",HRV:"HR",CUB:"CU",CUW:"CW",CYP:"CY",CZE:"CZ",DNK:"DK",DJI:"DJ",DMA:"DM",DOM:"DO",ECU:"EC",EGY:"EG",SLV:"SV",GNQ:"GQ",ERI:"ER",EST:"EE",ETH:"ET",FLK:"FK",FRO:"FO",FJI:"FJ",FIN:"FI",FRA:"FR",GUF:"GF",PYF:"PF",ATF:"TF",GAB:"GA",GMB:"GM",GEO:"GE",DEU:"DE",GHA:"GH",GIB:"GI",GRC:"GR",GRL:"GL",GRD:"GD",GLP:"GP",GUM:"GU",GTM:"GT",GGY:"GG",GIN:"GN",GNB:"GW",GUY:"GY",HTI:"HT",HMD:"HM",VAT:"VA",HND:"HN",HUN:"HU",ISL:"IS",IND:"IN",IDN:"ID",IRN:"IR",IRQ:"IQ",IRL:"IE",IMN:"IM",ISR:"IL",ITA:"IT",JAM:"JM",JPN:"JP",JEY:"JE",JOR:"JO",KAZ:"KZ",KEN:"KE",KIR:"KI",PRK:"KP",KOR:"KR",KWT:"KW",KGZ:"KG",LAO:"LA",LVA:"LV",LBN:"LB",LSO:"LS",LBR:"LR",LBY:"LY",LIE:"LI",LTU:"LT",LUX:"LU",MKD:"MK",MDG:"MG",MWI:"MW",MYS:"MY",MDV:"MV",MLI:"ML",MLT:"MT",MHL:"MH",MTQ:"MQ",MRT:"MR",MUS:"MU",MYT:"YT",MEX:"MX",FSM:"FM",MDA:"MD",MCO:"MC",MNG:"MN",MNE:"ME",MSR:"MS",MAR:"MA",MOZ:"MZ",MMR:"MM",NAM:"NA",NRU:"NR",NPL:"NP",NLD:"NL",ANT:"AN",NCL:"NC",NZL:"NZ",NIC:"NI",NER:"NE",NGA:"NG",NIU:"NU",NFK:"NF",MNP:"MP",NOR:"NO",OMN:"OM",PAK:"PK",PLW:"PW",PSE:"PS",PAN:"PA",PNG:"PG",PRY:"PY",PER:"PE",PHL:"PH",PCN:"PN",POL:"PL",PRT:"PT",PRI:"PR",QAT:"QA",REU:"RE",ROU:"RO",RUS:"RU",RWA:"RW",BLM:"BL",SHN:"SH",KNA:"KN",LCA:"LC",MAF:"MF",SPM:"PM",VCT:"VC",WSM:"WS",SMR:"SM",STP:"ST",SAU:"SA",SEN:"SN",SRB:"RS",SYC:"SC",SLE:"SL",SGP:"SG",SXM:"SX",SVK:"SK",SVN:"SI",SLB:"SB",SOM:"SO",ZAF:"ZA",SGS:"GS",SSD:"SS",ESP:"ES",LKA:"LK",SDN:"SD",SUR:"SR",SJM:"SJ",SWZ:"SZ",SWE:"SE",CHE:"CH",SYR:"SY",TWN:"TW",TJK:"TJ",TZA:"TZ",THA:"TH",TLS:"TL",TGO:"TG",TKL:"TK",TON:"TO",TTO:"TT",TUN:"TN",TUR:"TR",TKM:"TM",TCA:"TC",TUV:"TV",UGA:"UG",UKR:"UA",ARE:"AE",GBR:"GB",USA:"US",UMI:"UM",URY:"UY",UZB:"UZ",VUT:"VU",VEN:"VE",VNM:"VN",VIR:"VI",WLF:"WF",ESH:"EH",YEM:"YE",ZMB:"ZM",ZWE:"ZW",XKX:"XK"};function yt(e){return wt[e]?wt[e]:"xx"}function Vt(e,t,l){const n=e.slice();return n[26]=t[l],n}function Ft(e,t,l){const n=e.slice();return n[26]=t[l],n}function Ht(e){let t,l=e[3].num_athletes+"",n,s,r,o="bases.athle.fr";return{c(){t=A("div"),n=Y(l),s=Y(" athlètes de "),r=A("a"),r.textContent=o,this.h()},l(a){t=b(a,"DIV",{class:!0});var i=k(t);n=q(i,l),s=q(i," athlètes de "),r=b(i,"A",{href:!0,class:!0,"data-svelte-h":!0}),de(r)!=="svelte-18c9cjd"&&(r.textContent=o),i.forEach(_),this.h()},h(){d(r,"href","https://www.bases_athle.fr"),d(r,"class","svelte-1toysts"),d(t,"class","database-status svelte-1toysts")},m(a,i){V(a,t,i),c(t,n),c(t,s),c(t,r)},p(a,i){i&8&&l!==(l=a[3].num_athletes+"")&&ve(n,l)},d(a){a&&_(t)}}}function Kt(e){let t,l,n=e[0]&&Wt(),s=Q(e[4]),r=[];for(let o=0;o<s.length;o+=1)r[o]=Zt(Ft(e,s,o));return{c(){t=A("ul"),n&&n.c(),l=B();for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){t=b(o,"UL",{class:!0});var a=k(t);n&&n.l(a),l=O(a);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(_),this.h()},h(){d(t,"class","suggestions svelte-1toysts")},m(o,a){V(o,t,a),n&&n.m(t,null),c(t,l);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,null)},p(o,a){if(o[0]?n||(n=Wt(),n.c(),n.m(t,l)):n&&(n.d(1),n=null),a&2064){s=Q(o[4]);let i;for(i=0;i<s.length;i+=1){const h=Ft(o,s,i);r[i]?r[i].p(h,a):(r[i]=Zt(h),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=s.length}},d(o){o&&_(t),n&&n.d(),Ce(r,o)}}}function Wt(e){let t;return{c(){t=A("div"),this.h()},l(l){t=b(l,"DIV",{class:!0}),k(t).forEach(_),this.h()},h(){d(t,"class","progress-bar svelte-1toysts")},m(l,n){V(l,t,n)},d(l){l&&_(t)}}}function qt(e){let t,l;return{c(){t=A("i"),this.h()},l(n){t=b(n,"I",{class:!0}),k(t).forEach(_),this.h()},h(){d(t,"class",l=rt(`fa ${e[26].sexe==="M"?"fa-mars":"fa-venus"}`)+" svelte-1toysts")},m(n,s){V(n,t,s)},p(n,s){s&16&&l!==(l=rt(`fa ${n[26].sexe==="M"?"fa-mars":"fa-venus"}`)+" svelte-1toysts")&&d(t,"class",l)},d(n){n&&_(t)}}}function Yt(e){let t,l=e[26].license_id+"",n;return{c(){t=A("i"),n=Y(l),this.h()},l(s){t=b(s,"I",{class:!0});var r=k(t);n=q(r,l),r.forEach(_),this.h()},h(){d(t,"class","license svelte-1toysts")},m(s,r){V(s,t,r),c(t,n)},p(s,r){r&16&&l!==(l=s[26].license_id+"")&&ve(n,l)},d(s){s&&_(t)}}}function Zt(e){let t,l,n,s,r,o=e[26].name+"",a,i,h=(e[26].birth_date||"")+"",w,E,p,D,T,S,m=e[26].sexe&&qt(e),v=e[26].license_id&&Yt(e);function N(){return e[17](e[26])}return{c(){t=A("li"),l=A("button"),n=A("span"),r=B(),a=Y(o),i=Y(" - "),w=Y(h),E=B(),m&&m.c(),p=B(),v&&v.c(),D=B(),this.h()},l(L){t=b(L,"LI",{});var I=k(t);l=b(I,"BUTTON",{class:!0});var R=k(l);n=b(R,"SPAN",{class:!0}),k(n).forEach(_),r=O(R),a=q(R,o),i=q(R," - "),w=q(R,h),E=O(R),m&&m.l(R),p=O(R),v&&v.l(R),R.forEach(_),D=O(I),I.forEach(_),this.h()},h(){d(n,"class",s="fi fi-"+yt(e[26].nationality).toLowerCase()+" svelte-1toysts"),d(l,"class","suggestion-btn svelte-1toysts")},m(L,I){V(L,t,I),c(t,l),c(l,n),c(l,r),c(l,a),c(l,i),c(l,w),c(l,E),m&&m.m(l,null),c(l,p),v&&v.m(l,null),c(t,D),T||(S=X(l,"click",N),T=!0)},p(L,I){e=L,I&16&&s!==(s="fi fi-"+yt(e[26].nationality).toLowerCase()+" svelte-1toysts")&&d(n,"class",s),I&16&&o!==(o=e[26].name+"")&&ve(a,o),I&16&&h!==(h=(e[26].birth_date||"")+"")&&ve(w,h),e[26].sexe?m?m.p(e,I):(m=qt(e),m.c(),m.m(l,p)):m&&(m.d(1),m=null),e[26].license_id?v?v.p(e,I):(v=Yt(e),v.c(),v.m(l,null)):v&&(v.d(1),v=null)},d(L){L&&_(t),m&&m.d(),v&&v.d(),T=!1,S()}}}function Jt(e){let t,l;return{c(){t=A("i"),this.h()},l(n){t=b(n,"I",{class:!0}),k(t).forEach(_),this.h()},h(){d(t,"class",l=rt(`fa ${e[26].sexe==="M"?"fa-mars":"fa-venus"}`)+" svelte-1toysts")},m(n,s){V(n,t,s)},p(n,s){s&32&&l!==(l=rt(`fa ${n[26].sexe==="M"?"fa-mars":"fa-venus"}`)+" svelte-1toysts")&&d(t,"class",l)},d(n){n&&_(t)}}}function Xt(e){let t;return{c(){t=A("div"),this.h()},l(l){t=b(l,"DIV",{class:!0}),k(t).forEach(_),this.h()},h(){d(t,"class","spinner")},m(l,n){V(l,t,n)},d(l){l&&_(t)}}}function Qt(e){let t,l,n,s,r,o,a,i,h,w="x",E,p,D,T,S=e[26].name+"",m,v,N,L,I,R,U,H=e[9](e[26].id),W,y,ue;function ie(){return e[18](e[26])}function Me(){return e[19](e[26])}let g=e[26].sexe&&Jt(e),C=H&&Xt();return{c(){t=A("div"),l=A("label"),n=A("input"),o=B(),a=A("span"),i=B(),h=A("button"),h.textContent=w,E=B(),p=A("span"),D=B(),T=A("a"),m=Y(S),N=B(),L=A("span"),g&&g.c(),I=B(),R=A("i"),U=B(),C&&C.c(),W=B(),this.h()},l(K){t=b(K,"DIV",{class:!0});var G=k(t);l=b(G,"LABEL",{class:!0});var ce=k(l);n=b(ce,"INPUT",{id:!0,type:!0}),o=O(ce),a=b(ce,"SPAN",{class:!0}),k(a).forEach(_),ce.forEach(_),i=O(G),h=b(G,"BUTTON",{class:!0,"data-svelte-h":!0}),de(h)!=="svelte-k43bj9"&&(h.textContent=w),E=O(G),p=b(G,"SPAN",{class:!0,style:!0}),k(p).forEach(_),D=O(G),T=b(G,"A",{href:!0,target:!0,rel:!0});var ge=k(T);m=q(ge,S),ge.forEach(_),N=O(G),L=b(G,"SPAN",{});var be=k(L);g&&g.l(be),I=O(be),R=b(be,"I",{class:!0}),k(R).forEach(_),be.forEach(_),U=O(G),C&&C.l(G),W=O(G),G.forEach(_),this.h()},h(){d(n,"id",s="athlete-switch-"+e[26].id),d(n,"type","checkbox"),n.checked=r=e[26].visible,d(a,"class","slider round"),d(l,"class","switch"),d(h,"class","delete-athlete-btn svelte-1toysts"),d(p,"class","color-indicator svelte-1toysts"),Pt(p,"background-color",e[26].color),d(T,"href",v=e[26].url),d(T,"target","_blank"),d(T,"rel","noopener noreferrer"),d(R,"class","fas fa-external-link-alt"),d(t,"class","selected-athlete svelte-1toysts")},m(K,G){V(K,t,G),c(t,l),c(l,n),c(l,o),c(l,a),c(t,i),c(t,h),c(t,E),c(t,p),c(t,D),c(t,T),c(T,m),c(t,N),c(t,L),g&&g.m(L,null),c(L,I),c(L,R),c(t,U),C&&C.m(t,null),c(t,W),y||(ue=[X(n,"change",ie),X(h,"click",Me)],y=!0)},p(K,G){e=K,G&32&&s!==(s="athlete-switch-"+e[26].id)&&d(n,"id",s),G&32&&r!==(r=e[26].visible)&&(n.checked=r),G&32&&Pt(p,"background-color",e[26].color),G&32&&S!==(S=e[26].name+"")&&ve(m,S),G&32&&v!==(v=e[26].url)&&d(T,"href",v),e[26].sexe?g?g.p(e,G):(g=Jt(e),g.c(),g.m(L,I)):g&&(g.d(1),g=null),G&32&&(H=e[9](e[26].id)),H?C||(C=Xt(),C.c(),C.m(t,W)):C&&(C.d(1),C=null)},d(K){K&&_(t),g&&g.d(),C&&C.d(),y=!1,at(ue)}}}function mn(e){let t,l,n,s,r,o,a,i,h,w,E=e[3].num_athletes&&Ht(e),p=(e[4].length||e[0])&&Kt(e),D=Q(e[5]),T=[];for(let S=0;S<D.length;S+=1)T[S]=Qt(Vt(e,D,S));return{c(){t=A("div"),l=A("div"),n=A("input"),s=B(),r=A("i"),o=B(),E&&E.c(),a=B(),p&&p.c(),i=B();for(let S=0;S<T.length;S+=1)T[S].c();this.h()},l(S){t=b(S,"DIV",{class:!0});var m=k(t);l=b(m,"DIV",{class:!0});var v=k(l);n=b(v,"INPUT",{type:!0,class:!0,placeholder:!0}),s=O(v),r=b(v,"I",{class:!0}),k(r).forEach(_),v.forEach(_),o=O(m),E&&E.l(m),a=O(m),p&&p.l(m),i=O(m);for(let N=0;N<T.length;N+=1)T[N].l(m);m.forEach(_),this.h()},h(){d(n,"type","text"),d(n,"class","search-input svelte-1toysts"),d(n,"placeholder","Rechercher un athlète..."),d(r,"class","fas fa-search search-icon svelte-1toysts"),d(l,"class","search-box svelte-1toysts"),d(t,"class","athlete-search svelte-1toysts")},m(S,m){V(S,t,m),c(t,l),c(l,n),Re(n,e[2]),e[16](n),c(l,s),c(l,r),c(t,o),E&&E.m(t,null),c(t,a),p&&p.m(t,null),c(t,i);for(let v=0;v<T.length;v+=1)T[v]&&T[v].m(t,null);h||(w=[X(n,"input",e[14]),X(n,"focus",e[13]),X(n,"input",e[15])],h=!0)},p(S,[m]){if(m&4&&n.value!==S[2]&&Re(n,S[2]),S[3].num_athletes?E?E.p(S,m):(E=Ht(S),E.c(),E.m(t,a)):E&&(E.d(1),E=null),S[4].length||S[0]?p?p.p(S,m):(p=Kt(S),p.c(),p.m(t,i)):p&&(p.d(1),p=null),m&4896){D=Q(S[5]);let v;for(v=0;v<D.length;v+=1){const N=Vt(S,D,v);T[v]?T[v].p(N,m):(T[v]=Qt(N),T[v].c(),T[v].m(t,null))}for(;v<T.length;v+=1)T[v].d(1);T.length=D.length}},i:Be,o:Be,d(S){S&&_(t),e[16](null),E&&E.d(),p&&p.d(),Ce(T,S),h=!1,at(w)}}}function gn(e,t,l){let n,s,r;fe(e,he,g=>l(5,r=g));const o=me([]);fe(e,o,g=>l(4,s=g));const a={},i=me({numAthletes:0,lastUpdate:""});fe(e,i,g=>l(3,n=g));let h=0,w=!1,E,p="",D;async function T(g){a[g.id]=!0;try{const C=await fetch(`/api/get_athlete_records?ident=${encodeURIComponent(g.id)}`);if(C.ok)return C.json();console.error("Failed to fetch athlete records")}catch(C){console.error("Error fetching athlete records:",C)}finally{a[g.id]=!1}}async function S(){try{const g=await fetch("/api/database_status");if(g.ok){const C=await g.json();C.last_update&&(C.last_update=new Date(C.last_update).toLocaleString()),C.num_athletes&&(C.num_athletes=new Intl.NumberFormat().format(C.num_athletes)),i.set(C)}else console.error("Failed to fetch database status")}catch(g){console.error("Error fetching database status:",g)}}function m(g){he.toggleVisible(g.id),he.isAthleteVisible(g.id)&&(he.setLoading(g.id,!0),T(g).then(C=>{he.setRecords(g.id,C)}).catch(C=>{console.error("Error fetching athlete records:",C),he.setLoading(g.id,!1)}))}function v(g){return a[g]||!1}const N=_n(async g=>{if(g.length<3){o.set([]);return}D&&D.abort(),D=new AbortController;const C=D.signal;l(0,w=!0),h++;try{const K=await fetch(`/api/get_athletes_from_db?name=${encodeURIComponent(g)}`,{signal:C});if(K.ok){const G=await K.json();o.set(G)}else console.error("Failed to fetch athlete data"),o.set([])}catch(K){K.name==="AbortError"?console.debug("Fetch aborted:",g):(console.error("Error fetching athlete data:",K),o.set([]))}finally{h--,h===0&&l(0,w=!1)}},200);function L(g){l(2,p=""),he.addAthlete(g),T(g).then(C=>{he.setRecords(g.id,C)}).catch(C=>{console.error("Error fetching athlete records:",C)}),o.set([])}function I(g){he.removeAthlete(g.id)}function R(g){E&&!E.contains(g.target)&&o.set([])}function U(){p.length>=3&&N(p)}gl(()=>{S();const g=localStorage.getItem("selectedAthletes");return g&&he.setAthletes(JSON.parse(g)),he.subscribe(C=>{localStorage.setItem("selectedAthletes",JSON.stringify(C))}),window.addEventListener("click",R),()=>{window.removeEventListener("click",R)}});function H(){p=this.value,l(2,p)}const W=()=>N(p);function y(g){kl[g?"unshift":"push"](()=>{E=g,l(1,E)})}return[w,E,p,n,s,r,o,i,m,v,N,L,I,U,H,W,y,g=>L(g),g=>m(g),g=>I(g)]}class pn extends bt{constructor(t){super(),At(this,t,gn,mn,vt,{})}}const dt=me(!1),_t=me(Cl);function zt(e,t,l){const n=e.slice();return n[44]=t[l],n[46]=l,n}function $t(e,t,l){const n=e.slice();return n[47]=t[l],n[49]=l,n}function xt(e,t,l){const n=e.slice();return n[47]=t[l],n}function el(e,t,l){const n=e.slice();return n[52]=t[l],n}function tl(e,t,l){const n=e.slice();return n[55]=t[l],n}function ll(e,t,l){const n=e.slice();return n[58]=t[l],n}function nl(e,t,l){const n=e.slice();return n[58]=t[l],n}function sl(e){let t,l,n=ot(e[58])+"",s,r;return{c(){t=Y(`/km
          `),l=A("option"),s=Y(n),r=Y(" / km"),this.h()},l(o){t=q(o,`/km
          `),l=b(o,"OPTION",{});var a=k(l);s=q(a,n),r=q(a," / km"),a.forEach(_),this.h()},h(){l.__value=e[58],Re(l,l.__value)},m(o,a){V(o,t,a),V(o,l,a),c(l,s),c(l,r)},p:Be,d(o){o&&(_(t),_(l))}}}function rl(e){let t,l=ot(e[58])+"",n,s;return{c(){t=A("option"),n=Y(l),s=Y(" / km"),this.h()},l(r){t=b(r,"OPTION",{});var o=k(t);n=q(o,l),s=q(o," / km"),o.forEach(_),this.h()},h(){t.__value=e[58],Re(t,t.__value)},m(r,o){V(r,t,o),c(t,n),c(t,s)},p:Be,d(r){r&&_(t)}}}function ol(e){let t,l=e[55]+"",n,s;return{c(){t=A("option"),n=Y(l),s=Y('"'),this.h()},l(r){t=b(r,"OPTION",{});var o=k(t);n=q(o,l),s=q(o,'"'),o.forEach(_),this.h()},h(){t.__value=e[55],Re(t,t.__value)},m(r,o){V(r,t,o),c(t,n),c(t,s)},p:Be,d(r){r&&_(t)}}}function il(e){let t,l,n,s=Q(e[11]),r=[];for(let o=0;o<s.length;o+=1)r[o]=al(el(e,s,o));return{c(){t=A("select");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){t=b(o,"SELECT",{class:!0});var a=k(t);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(_),this.h()},h(){d(t,"class","svelte-1qgjma0"),e[9]===void 0&&st(()=>e[31].call(t))},m(o,a){V(o,t,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(t,null);Le(t,e[9],!0),l||(n=X(t,"change",e[31]),l=!0)},p(o,a){if(a[0]&2048){s=Q(o[11]);let i;for(i=0;i<s.length;i+=1){const h=el(o,s,i);r[i]?r[i].p(h,a):(r[i]=al(h),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=s.length}a[0]&2560&&Le(t,o[9])},d(o){o&&_(t),Ce(r,o),l=!1,n()}}}function al(e){let t,l=e[52].toFixed(1)+"",n,s;return{c(){t=A("option"),n=Y(l),s=Y(" km/h"),this.h()},l(r){t=b(r,"OPTION",{});var o=k(t);n=q(o,l),s=q(o," km/h"),o.forEach(_),this.h()},h(){t.__value=e[52],Re(t,t.__value)},m(r,o){V(r,t,o),c(t,n),c(t,s)},p:Be,d(r){r&&_(t)}}}function cl(e){let t,l;return{c(){t=A("p"),l=Y(e[5]),this.h()},l(n){t=b(n,"P",{class:!0});var s=k(t);l=q(s,e[5]),s.forEach(_),this.h()},h(){d(t,"class","error svelte-1qgjma0")},m(n,s){V(n,t,s),c(t,l)},p(n,s){s[0]&32&&ve(l,n[5])},d(n){n&&_(t)}}}function fl(e){let t,l="% VMA";return{c(){t=A("th"),t.textContent=l,this.h()},l(n){t=b(n,"TH",{class:!0,"data-svelte-h":!0}),de(t)!=="svelte-12tol9b"&&(t.textContent=l),this.h()},h(){d(t,"class","svelte-1qgjma0")},m(n,s){V(n,t,s)},d(n){n&&_(t)}}}function ul(e){let t,l="X",n,s;function r(...a){return e[32](e[47],...a)}function o(...a){return e[33](e[47],...a)}return{c(){t=A("span"),t.textContent=l,this.h()},l(a){t=b(a,"SPAN",{class:!0,role:!0,tabindex:!0,"aria-label":!0,"data-svelte-h":!0}),de(t)!=="svelte-16pw5an"&&(t.textContent=l),this.h()},h(){d(t,"class","delete-btn svelte-1qgjma0"),d(t,"role","button"),d(t,"tabindex","0"),d(t,"aria-label","Supprimer")},m(a,i){V(a,t,i),n||(s=[X(t,"click",r),X(t,"keydown",o)],n=!0)},p(a,i){e=a},d(a){a&&_(t),n=!1,at(s)}}}function hl(e){let t,l=(e[12][e[47]]||e[47])+"",n,s,r=!Pe.includes(e[47]),o,a,i,h=r&&ul(e);function w(){return e[34](e[47])}return{c(){t=A("th"),n=Y(l),s=B(),h&&h.c(),o=B(),this.h()},l(E){t=b(E,"TH",{class:!0});var p=k(t);n=q(p,l),s=O(p),h&&h.l(p),o=O(p),p.forEach(_),this.h()},h(){d(t,"class","svelte-1qgjma0")},m(E,p){V(E,t,p),c(t,n),c(t,s),h&&h.m(t,null),c(t,o),a||(i=X(t,"click",w),a=!0)},p(E,p){e=E,p[0]&16&&l!==(l=(e[12][e[47]]||e[47])+"")&&ve(n,l),p[0]&16&&(r=!Pe.includes(e[47])),r?h?h.p(e,p):(h=ul(e),h.c(),h.m(t,o)):h&&(h.d(1),h=null)},d(E){E&&_(t),h&&h.d(),a=!1,i()}}}function dl(e){let t,l=Math.round(100*e[44].speed/e[9])+"",n,s;return{c(){t=A("td"),n=Y(l),s=Y("%"),this.h()},l(r){t=b(r,"TD",{class:!0});var o=k(t);n=q(o,l),s=q(o,"%"),o.forEach(_),this.h()},h(){d(t,"class","svelte-1qgjma0"),_e(t,"highlighted",e[6].row===e[44])},m(r,o){V(r,t,o),c(t,n),c(t,s)},p(r,o){o[0]&513&&l!==(l=Math.round(100*r[44].speed/r[9])+"")&&ve(n,l),o[0]&65&&_e(t,"highlighted",r[6].row===r[44])},d(r){r&&_(t)}}}function _l(e){let t,l=Ot(e[44][e[47]],e[47]<800)+"",n,s,r,o;function a(...i){return e[35](e[47],e[44],...i)}return{c(){t=A("td"),n=Y(l),this.h()},l(i){t=b(i,"TD",{style:!0,class:!0});var h=k(t);n=q(h,l),h.forEach(_),this.h()},h(){d(t,"style",s=e[18](e[47],e[44][e[47]])),d(t,"class","svelte-1qgjma0"),_e(t,"highlighted",e[6].column===e[47]||e[6].row===e[44]),_e(t,"men-record",e[10]&&e[16](e[47],e[44][e[47]])),_e(t,"women-record",e[10]&&e[17](e[47],e[44][e[47]]))},m(i,h){V(i,t,h),c(t,n),r||(o=X(t,"click",a),r=!0)},p(i,h){e=i,h[0]&17&&l!==(l=Ot(e[44][e[47]],e[47]<800)+"")&&ve(n,l),h[0]&17&&s!==(s=e[18](e[47],e[44][e[47]]))&&d(t,"style",s),h[0]&81&&_e(t,"highlighted",e[6].column===e[47]||e[6].row===e[44]),h[0]&66577&&_e(t,"men-record",e[10]&&e[16](e[47],e[44][e[47]])),h[0]&132113&&_e(t,"women-record",e[10]&&e[17](e[47],e[44][e[47]]))},d(i){i&&_(t),r=!1,o()}}}function ml(e){let t,l,n,s=ot(e[44].pace)+"",r,o,a,i=Bt(e[44].speed)+"",h,w,E,p,D,T=e[8]&&dl(e),S=Q(e[4]),m=[];for(let N=0;N<S.length;N+=1)m[N]=_l($t(e,S,N));function v(...N){return e[36](e[44],...N)}return{c(){t=A("tr"),T&&T.c(),l=B(),n=A("td"),r=Y(s),o=B(),a=A("td"),h=Y(i),w=B();for(let N=0;N<m.length;N+=1)m[N].c();E=B(),this.h()},l(N){t=b(N,"TR",{class:!0});var L=k(t);T&&T.l(L),l=O(L),n=b(L,"TD",{class:!0});var I=k(n);r=q(I,s),I.forEach(_),o=O(L),a=b(L,"TD",{class:!0});var R=k(a);h=q(R,i),R.forEach(_),w=O(L);for(let U=0;U<m.length;U+=1)m[U].l(L);E=O(L),L.forEach(_),this.h()},h(){d(n,"class","col-head svelte-1qgjma0"),_e(n,"highlighted",e[6].row===e[44]),d(a,"class","col-head svelte-1qgjma0"),_e(a,"highlighted",e[6].row===e[44]),d(t,"class","svelte-1qgjma0")},m(N,L){V(N,t,L),T&&T.m(t,null),c(t,l),c(t,n),c(n,r),c(t,o),c(t,a),c(a,h),c(t,w);for(let I=0;I<m.length;I+=1)m[I]&&m[I].m(t,null);c(t,E),p||(D=X(t,"click",v),p=!0)},p(N,L){if(e=N,e[8]?T?T.p(e,L):(T=dl(e),T.c(),T.m(t,l)):T&&(T.d(1),T=null),L[0]&1&&s!==(s=ot(e[44].pace)+"")&&ve(r,s),L[0]&65&&_e(n,"highlighted",e[6].row===e[44]),L[0]&1&&i!==(i=Bt(e[44].speed)+"")&&ve(h,i),L[0]&65&&_e(a,"highlighted",e[6].row===e[44]),L[0]&492625){S=Q(e[4]);let I;for(I=0;I<S.length;I+=1){const R=$t(e,S,I);m[I]?m[I].p(R,L):(m[I]=_l(R),m[I].c(),m[I].m(t,E))}for(;I<m.length;I+=1)m[I].d(1);m.length=S.length}},d(N){N&&_(t),T&&T.d(),Ce(m,N),p=!1,D()}}}function vn(e){let t,l,n,s,r,o,a="Min.",i,h,w,E,p,D="Max.",T,S,m,v,N,L="Incrément.",I,R,U,H,W,y,ue,ie,Me="+",g,C,K,G,ce,ge,be,Ae,Ze="VMA",He,Ke,De,pe,Ne,le,Ge,Ee,Je="t/km",M,P,F="km/h",Se,Te,ne,Ie,se,We='<a href="mailto:contact@mypacer.fr">contact@mypacer.fr</a>',Xe,ft,Et;l=new pn({});let Ue=Q(e[13]),z=[];for(let u=0;u<Ue.length;u+=1)z[u]=sl(nl(e,Ue,u));let je=Q(e[13]),$=[];for(let u=0;u<je.length;u+=1)$[u]=rl(ll(e,je,u));let we=Q(e[14]),x=[];for(let u=0;u<we.length;u+=1)x[u]=ol(tl(e,we,u));let re=e[8]&&il(e),oe=e[5]&&cl(e),ae=e[8]&&fl(),ye=Q(e[4]),ee=[];for(let u=0;u<ye.length;u+=1)ee[u]=hl(xt(e,ye,u));let Ve=Q(e[0]),te=[];for(let u=0;u<Ve.length;u+=1)te[u]=ml(zt(e,Ve,u));return{c(){t=A("div"),El(l.$$.fragment),n=B(),s=A("form"),r=A("div"),o=A("label"),o.textContent=a,i=B(),h=A("select");for(let u=0;u<z.length;u+=1)z[u].c();w=B(),E=A("div"),p=A("label"),p.textContent=D,T=B(),S=A("select");for(let u=0;u<$.length;u+=1)$[u].c();m=B(),v=A("div"),N=A("label"),N.textContent=L,I=B(),R=A("select");for(let u=0;u<x.length;u+=1)x[u].c();U=B(),H=A("div"),W=A("div"),y=A("input"),ue=B(),ie=A("button"),ie.textContent=Me,g=B(),C=A("div"),K=A("label"),G=A("input"),ce=B(),ge=A("span"),be=B(),Ae=A("label"),Ae.textContent=Ze,He=B(),re&&re.c(),Ke=B(),oe&&oe.c(),De=B(),pe=A("table"),Ne=A("thead"),le=A("tr"),ae&&ae.c(),Ge=B(),Ee=A("th"),Ee.textContent=Je,M=B(),P=A("th"),P.textContent=F,Se=B();for(let u=0;u<ee.length;u+=1)ee[u].c();Te=B(),ne=A("tbody");for(let u=0;u<te.length;u+=1)te[u].c();Ie=B(),se=A("div"),se.innerHTML=We,this.h()},l(u){t=b(u,"DIV",{class:!0});var j=k(t);Ml(l.$$.fragment,j),n=O(j),s=b(j,"FORM",{class:!0});var f=k(s);r=b(f,"DIV",{});var Z=k(r);o=b(Z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),de(o)!=="svelte-v0vbq0"&&(o.textContent=a),i=O(Z),h=b(Z,"SELECT",{id:!0,class:!0});var Tt=k(h);for(let J=0;J<z.length;J+=1)z[J].l(Tt);Tt.forEach(_),Z.forEach(_),w=O(f),E=b(f,"DIV",{});var Qe=k(E);p=b(Qe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),de(p)!=="svelte-v7ujnk"&&(p.textContent=D),T=O(Qe),S=b(Qe,"SELECT",{id:!0,class:!0});var Ct=k(S);for(let J=0;J<$.length;J+=1)$[J].l(Ct);Ct.forEach(_),Qe.forEach(_),m=O(f),v=b(f,"DIV",{});var ze=k(v);N=b(ze,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),de(N)!=="svelte-1fk35zi"&&(N.textContent=L),I=O(ze),R=b(ze,"SELECT",{id:!0,class:!0});var Nt=k(R);for(let J=0;J<x.length;J+=1)x[J].l(Nt);Nt.forEach(_),ze.forEach(_),f.forEach(_),U=O(j),H=b(j,"DIV",{class:!0});var It=k(H);W=b(It,"DIV",{class:!0});var $e=k(W);y=b($e,"INPUT",{type:!0,placeholder:!0,min:!0,class:!0}),ue=O($e),ie=b($e,"BUTTON",{type:!0,class:!0,"aria-label":!0,"data-svelte-h":!0}),de(ie)!=="svelte-uskr2p"&&(ie.textContent=Me),$e.forEach(_),It.forEach(_),g=O(j),C=b(j,"DIV",{class:!0});var Fe=k(C);K=b(Fe,"LABEL",{class:!0});var xe=k(K);G=b(xe,"INPUT",{id:!0,type:!0}),ce=O(xe),ge=b(xe,"SPAN",{class:!0}),k(ge).forEach(_),xe.forEach(_),be=O(Fe),Ae=b(Fe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),de(Ae)!=="svelte-4ytuzi"&&(Ae.textContent=Ze),He=O(Fe),re&&re.l(Fe),Fe.forEach(_),Ke=O(j),oe&&oe.l(j),j.forEach(_),De=O(u),pe=b(u,"TABLE",{class:!0});var et=k(pe);Ne=b(et,"THEAD",{class:!0});var kt=k(Ne);le=b(kt,"TR",{class:!0});var ke=k(le);ae&&ae.l(ke),Ge=O(ke),Ee=b(ke,"TH",{class:!0,"data-svelte-h":!0}),de(Ee)!=="svelte-1j08yrr"&&(Ee.textContent=Je),M=O(ke),P=b(ke,"TH",{class:!0,"data-svelte-h":!0}),de(P)!=="svelte-q6592d"&&(P.textContent=F),Se=O(ke);for(let J=0;J<ee.length;J+=1)ee[J].l(ke);ke.forEach(_),kt.forEach(_),Te=O(et),ne=b(et,"TBODY",{});var Lt=k(ne);for(let J=0;J<te.length;J+=1)te[J].l(Lt);Lt.forEach(_),et.forEach(_),Ie=O(u),se=b(u,"DIV",{class:!0,"data-svelte-h":!0}),de(se)!=="svelte-6lf6t8"&&(se.innerHTML=We),this.h()},h(){d(o,"for","min-pace"),d(o,"class","svelte-1qgjma0"),d(h,"id","min-pace"),d(h,"class","material-select svelte-1qgjma0"),e[2]===void 0&&st(()=>e[25].call(h)),d(p,"for","max-pace"),d(p,"class","svelte-1qgjma0"),d(S,"id","max-pace"),d(S,"class","material-select svelte-1qgjma0"),e[1]===void 0&&st(()=>e[26].call(S)),d(N,"for","increment"),d(N,"class","svelte-1qgjma0"),d(R,"id","increment"),d(R,"class","material-select svelte-1qgjma0"),e[3]===void 0&&st(()=>e[27].call(R)),d(s,"class","svelte-1qgjma0"),d(y,"type","number"),d(y,"placeholder","Ajouter distance (m)"),d(y,"min","1"),d(y,"class","svelte-1qgjma0"),d(ie,"type","button"),d(ie,"class","add-btn svelte-1qgjma0"),d(ie,"aria-label","Ajouter une distance"),d(W,"class","custom-dist svelte-1qgjma0"),d(H,"class","custom-dist svelte-1qgjma0"),d(G,"id","vma-switch"),d(G,"type","checkbox"),d(ge,"class","slider round"),d(K,"class","switch svelte-1qgjma0"),d(Ae,"class","vma-switch-label svelte-1qgjma0"),d(Ae,"for","vma-switch"),d(C,"class","vma-selector"),d(t,"class","top-container"),d(Ee,"class","svelte-1qgjma0"),d(P,"class","svelte-1qgjma0"),d(le,"class","svelte-1qgjma0"),d(Ne,"class","svelte-1qgjma0"),d(pe,"class","svelte-1qgjma0"),d(se,"class","contact svelte-1qgjma0")},m(u,j){V(u,t,j),Sl(l,t,null),c(t,n),c(t,s),c(s,r),c(r,o),c(r,i),c(r,h);for(let f=0;f<z.length;f+=1)z[f]&&z[f].m(h,null);Le(h,e[2],!0),c(s,w),c(s,E),c(E,p),c(E,T),c(E,S);for(let f=0;f<$.length;f+=1)$[f]&&$[f].m(S,null);Le(S,e[1],!0),c(s,m),c(s,v),c(v,N),c(v,I),c(v,R);for(let f=0;f<x.length;f+=1)x[f]&&x[f].m(R,null);Le(R,e[3],!0),c(t,U),c(t,H),c(H,W),c(W,y),Re(y,e[7]),c(W,ue),c(W,ie),c(t,g),c(t,C),c(C,K),c(K,G),G.checked=e[8],c(K,ce),c(K,ge),c(C,be),c(C,Ae),c(C,He),re&&re.m(C,null),c(t,Ke),oe&&oe.m(t,null),V(u,De,j),V(u,pe,j),c(pe,Ne),c(Ne,le),ae&&ae.m(le,null),c(le,Ge),c(le,Ee),c(le,M),c(le,P),c(le,Se);for(let f=0;f<ee.length;f+=1)ee[f]&&ee[f].m(le,null);c(pe,Te),c(pe,ne);for(let f=0;f<te.length;f+=1)te[f]&&te[f].m(ne,null);V(u,Ie,j),V(u,se,j),Xe=!0,ft||(Et=[X(h,"change",e[25]),X(S,"change",e[26]),X(R,"change",e[27]),X(y,"input",e[28]),X(y,"keydown",e[29]),X(ie,"click",e[19]),X(G,"change",e[30])],ft=!0)},p(u,j){if(j[0]&8192){Ue=Q(u[13]);let f;for(f=0;f<Ue.length;f+=1){const Z=nl(u,Ue,f);z[f]?z[f].p(Z,j):(z[f]=sl(Z),z[f].c(),z[f].m(h,null))}for(;f<z.length;f+=1)z[f].d(1);z.length=Ue.length}if(j[0]&8196&&Le(h,u[2]),j[0]&8192){je=Q(u[13]);let f;for(f=0;f<je.length;f+=1){const Z=ll(u,je,f);$[f]?$[f].p(Z,j):($[f]=rl(Z),$[f].c(),$[f].m(S,null))}for(;f<$.length;f+=1)$[f].d(1);$.length=je.length}if(j[0]&8194&&Le(S,u[1]),j[0]&16384){we=Q(u[14]);let f;for(f=0;f<we.length;f+=1){const Z=tl(u,we,f);x[f]?x[f].p(Z,j):(x[f]=ol(Z),x[f].c(),x[f].m(R,null))}for(;f<x.length;f+=1)x[f].d(1);x.length=we.length}if(j[0]&16392&&Le(R,u[3]),j[0]&128&&Al(y.value)!==u[7]&&Re(y,u[7]),j[0]&256&&(G.checked=u[8]),u[8]?re?re.p(u,j):(re=il(u),re.c(),re.m(C,null)):re&&(re.d(1),re=null),u[5]?oe?oe.p(u,j):(oe=cl(u),oe.c(),oe.m(t,null)):oe&&(oe.d(1),oe=null),u[8]?ae||(ae=fl(),ae.c(),ae.m(le,Ge)):ae&&(ae.d(1),ae=null),j[0]&36880){ye=Q(u[4]);let f;for(f=0;f<ye.length;f+=1){const Z=xt(u,ye,f);ee[f]?ee[f].p(Z,j):(ee[f]=hl(Z),ee[f].c(),ee[f].m(le,null))}for(;f<ee.length;f+=1)ee[f].d(1);ee.length=ye.length}if(j[0]&493393){Ve=Q(u[0]);let f;for(f=0;f<Ve.length;f+=1){const Z=zt(u,Ve,f);te[f]?te[f].p(Z,j):(te[f]=ml(Z),te[f].c(),te[f].m(ne,null))}for(;f<te.length;f+=1)te[f].d(1);te.length=Ve.length}},i(u){Xe||(bl(l.$$.fragment,u),Xe=!0)},o(u){vl(l.$$.fragment,u),Xe=!1},d(u){u&&(_(t),_(De),_(pe),_(Ie),_(se)),pl(l),Ce(z,u),Ce($,u),Ce(x,u),re&&re.d(),oe&&oe.d(),ae&&ae.d(),Ce(ee,u),Ce(te,u),ft=!1,at(Et)}}}function bn(e,t,l){let n,s,r,o,a,i,h,w,E,p;fe(e,ct,M=>l(22,n=M)),fe(e,nt,M=>l(1,s=M)),fe(e,lt,M=>l(2,r=M)),fe(e,ut,M=>l(3,o=M)),fe(e,jl,M=>l(23,a=M)),fe(e,he,M=>l(24,i=M)),fe(e,Ul,M=>l(40,h=M)),fe(e,dt,M=>l(8,w=M)),fe(e,_t,M=>l(9,E=M)),fe(e,Gl,M=>l(10,p=M));let D=[],T=[],S=[],m="",v=mt,N=gt;const L=Array.from({length:41},(M,P)=>10+P*.5);let I=!1,R=null;const U={"1609.34":"Mile",5e3:"5km",1e4:"10km",2e4:"20km",21097:"Semi M.",42195:"Marathon"},H=[90,120,180,240,300,360,420,480,540,600].reverse(),W=[1,2,5,10,15,20,30],y={column:null,row:null};function ue(M,P,F){M.stopPropagation(),P!=null&&l(6,y.column=P===y.column?null:P,y),F!=null&&l(6,y.row=F===y.row?null:F,y)}async function ie(){if(I){console.log("Skipping fetch: already loading");return}I=!0;try{const M=await fetch("/api/generate_table",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({min_pace:r,max_pace:s,increment:o,distances:n})});M.ok?(l(0,D=await M.json()),D.length>0&&l(4,T=Object.keys(D[0]).filter(P=>P!=="pace"&&P!="speed").sort((P,F)=>parseInt(P)-parseInt(F)).map(Number).sort((P,F)=>P-F))):console.error("Error fetching data from the API")}catch(M){console.error("Error:",M)}finally{I=!1}}function Me(){R&&clearTimeout(R),R=setTimeout(()=>{ie()},150)}function g(M,P){if(a)return!1;const F=h.men[M];return K(M,P,F)}function C(M,P){if(a)return!1;const F=h.women[M];return K(M,P,F)}function K(M,P,F){if(!F)return!1;const Se=Number(M)*Number(o)/1e3,Te=P+Se,ne=P-Se;return Math.abs(P-F)<Math.abs(Te-F)&&Math.abs(P-F)<Math.abs(ne-F)}function G(M,P){const F=Number(M)*Number(o)/1e3,Se=P+F,Te=P-F,ne=[];for(const Ie of S){const se=Ie.records[M];Math.abs(P-se)<Math.abs(Se-se)&&Math.abs(P-se)<=Math.abs(Te-se)&&ne.push(Ie.color)}return ne.length>1?`background: linear-gradient(to right, ${ne.map((se,We)=>`${se} ${We*100/ne.length}%, ${se} ${(We+1)*100/ne.length}%`).join(", ")}); color: #fff;`:ne.length===1?`background-color: ${ne[0]}; color: #fff;`:""}let ce="";function ge(){Dl(ce),l(7,ce="")}gl(()=>{const M=qe(lt,"selectedMinPace",mt),P=qe(nt,"selectedMaxPace",gt),F=qe(ut,"selectedIncrement",Tl),Se=qe(dt,"showVMA",!1),Te=qe(_t,"selectedVMA",Cl);return()=>{M(),P(),F(),Se(),Te()}});function be(){r=tt(this),lt.set(r),l(13,H)}function Ae(){s=tt(this),nt.set(s),l(13,H)}function Ze(){o=tt(this),ut.set(o),l(14,W)}function He(){ce=Al(this.value),l(7,ce)}const Ke=M=>M.key==="Enter"&&ge();function De(){w=this.checked,dt.set(w)}function pe(){E=tt(this),_t.set(E),l(11,L)}const Ne=(M,P)=>{P.stopPropagation(),console.log("removeDistance",M),console.log(Pe,M,Pe.includes(M)),Dt(M)},le=(M,P)=>P.key==="Enter"&&Dt(M),Ge=M=>ue(event,M,null),Ee=(M,P,F)=>ue(F,M,P),Je=(M,P)=>ue(P,null,M);return e.$$.update=()=>{e.$$.dirty[0]&16777216&&i&&(S=i.filter(M=>M.visible),Me()),e.$$.dirty[0]&8388609&&!a&&D.length>0&&l(0,D=D.map(M=>({...M}))),e.$$.dirty[0]&3145742&&r&&s&&o&&(r<s?(l(5,m="L'allure minimale ne peut pas être supérieure à l'allure maximale."),Rt(lt,r=v,r),Rt(nt,s=N,s)):(l(5,m=""),l(20,v=r),l(21,N=s),Me())),e.$$.dirty[0]&4194304&&Me()},[D,s,r,o,T,m,y,ce,w,E,p,L,U,H,W,ue,g,C,G,ge,v,N,n,a,i,be,Ae,Ze,He,Ke,De,pe,Ne,le,Ge,Ee,Je]}class An extends bt{constructor(t){super(),At(this,t,bn,vn,vt,{},null,[-1,-1,-1])}}function Sn(e){let t,l,n;return l=new An({}),{c(){t=B(),El(l.$$.fragment),this.h()},l(s){Ll("svelte-tccddv",document.head).forEach(_),t=O(s),Ml(l.$$.fragment,s),this.h()},h(){document.title="MyPacer - Calculateur d'allure Running & Recherche FFA"},m(s,r){V(s,t,r),Sl(l,s,r),n=!0},p:Be,i(s){n||(bl(l.$$.fragment,s),n=!0)},o(s){vl(l.$$.fragment,s),n=!1},d(s){s&&_(t),pl(l,s)}}}class Cn extends bt{constructor(t){super(),At(this,t,null,Sn,vt,{})}}export{Cn as component};
